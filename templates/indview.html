{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>


  <meta charset="utf-8">
  <title>{{model.name}}</title>
  <!-- <meta id="my-data" data-name="" data-other={{model.inputs_csv}}> -->
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <script src="{% static 'lib/PapaParse/papaparse.js' %}"></script>
  <script src="{% static 'lib/PapaParse/papaparse.min.js'%}"></script>
  <script src="{% static 'lib/jquery/jquery.min.js' %}"></script>
  <script src="{% static 'lib/jquery/jquery-migrate.min.js' %}"></script>
  <meta content="" name="keywords">
  <meta content="" name="description">
  <link href="{% static 'images/favicon.png'%}" rel="icon">
  <link href="{% static 'images/apple-touch-icon.png'%}" rel="apple-touch-icon">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i|Montserrat:300,400,500,700" rel="stylesheet">

  <!-- Bootstrap CSS File -->
  <link rel="stylesheet" type="text/css" href="{% static 'css/risk_quantifica.css' %}">
  <link href="{% static 'lib/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="{% static 'lib/bootstrap/css/bootstrap.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'lib/bootstrap/css/bootstrap-responsive.css' %}">


  <!-- Libraries CSS Files -->
  <link href="{% static 'lib/font-awesome/css/font-awesome.min.css' %}" rel="stylesheet">
  <link href="{% static 'lib/animate/animate.min.css' %}" rel="stylesheet">
  <link href="{% static 'lib/ionicons/css/ionicons.min.css' %}" rel="stylesheet">
  <link href="{% static 'lib/owlcarousel/assets/owl.carousel.min.css' %}" rel="stylesheet">
  <link href="{% static 'lib/lightbox/css/lightbox.min.css' %}" rel="stylesheet">

  <!-- Uncomment below i you want to use a preloader -->
  <!-- <div id="preloader"></div> -->

  <!-- JavaScript Libraries -->
  <script src="{% static 'lib/jquery/jquery.min.js' %}"></script>
  <script src="{% static 'lib/jquery/jquery-migrate.min.js' %}"></script>
  <script src="{% static 'lib/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
  <script src="{% static 'lib/easing/easing.min.js' %}"></script>
  <script src="{% static 'lib/mobile-nav/mobile-nav.js' %}"></script>
  <script src="{% static 'lib/wow/wow.min.js'%}"></script>
  <script src="{% static 'lib/waypoints/waypoints.min.js'%}"></script>
  <script src="{% static 'lib/counterup/counterup.min.js'%}"></script>
  <script src="{% static 'lib/owlcarousel/owl.carousel.min.js' %}"></script>
  <script src="{% static 'lib/isotope/isotope.pkgd.min.js' %}"></script>
  <script src="{% static 'lib/lightbox/js/lightbox.min.js' %}"></script>
  <!-- Contact Form JavaScript File -->
  <script src="{% static 'js/contactform.js' %}"></script>



  <script>

           function init(){

               document.getElementById('upload').addEventListener('change', handleFileSelect, false);
  }

           function arrayToTable(tableData) {

               data =tableData;
               var table = $('<table></table>');
               for (i = 0; i < data.length; i = i + 1) {
                    row = $('<tr />');
               for (j = 0; j < data[i].length; j = j + 1) {
                    if (i === 0) {
                        row.append($('<th />').html(data["name"]["value"]));
                     } else {
                        row.append($('<td />').html(data[i][j]));
                    }
                  }
                    table.append(row);
               }
               return table;
               }


           $(window).load(function(){
              debugger;

           $("#Submit").click(function(){

               var results = {
                    data: []
               };
               var table = document.querySelector('table'),
                   rows = table.getElementsByTagName('tr'),
                   i, j, cells, customerId,obj={}, myMap = new Map();

               for (i = 0, j = rows.length; i < j; ++i) {
                   cells = rows[i].getElementsByTagName('td');

                     if (!cells.length) {
                        continue;
                      }

                      name = cells[0].innerHTML? cells[0].innerHTML.trim():"";
                      value= cells[1] ? parseInt(cells[1].innerHTML.trim()) : "";
                        myMap.set(name, value);
              }

             function mapToObj(map){
                var obj = {}
                map.forEach(function(v, k){
                obj[k] = v
              })
              return obj
            }
           var myJson = {};
            myJson= mapToObj(myMap);
            myJson=JSON.stringify(myJson)
           var res = document.getElementById('result');
            debugger;
               $.post('{{ model.endpoint }}',myJson).done(function(data){
                   debugger;
                   res.innerHTML = data;
              })

              });


               $('#table_data').on('click',"td",function(e){
                  debugger;
                  var OriginalContent = $(this).text();
                  $(this).addClass("cellEditing");
                  $(this).html("<input type='text' value='" + OriginalContent + "' />");
                  $(this).children().first().focus();
                  $(this).children().first().keypress(function (e) {
                   if (e.which == 13) { var newContent = $(this).val();
                       $(this).parent().text(newContent); $(this).parent().removeClass("cellEditing"); } });
                       $(this).children().first().blur(function(){ $(this).parent().text(OriginalContent);
                       $(this).parent().removeClass("cellEditing");
                     });
                   });


              $("#upload").bind("change", function(evt) {
                debugger;
                var bigFile = evt.target.files[0];
                var x = document.getElementById("upload").value;
                Papa.parse(bigFile, {
                    complete: function(results) {
                       debugger;
                       $('#table_data').html(arrayToTable(results.data));
                       $("#table_data").css("display", "block");
                       $("#Submit").css("display", "block");
                  }
                });
              });
          });


           function handleFileSelect(event){
              debugger;
               const reader = new FileReader();
               reader.onload = handleFileLoad;
               // reader.readAsText(event.target.files[0]);
               // console.log("new"+event.target.files[0]);
            }

           function handleFileLoad(event){
               debugger;
               console.log(event);
               $("#upload").val("");
               var table_data='<table class="table table-bordered table-stripped" style="border:"1px solid black"; margin: "5px"; width: "290px"; border-collapse: separate; border-spacing: 4px;">';
               var data= event.target.result;
               }
  </script>

  </head>
   <body>
  <header id="header" class="fixed-top ">
    <div class="container">

      <div class="logo float-left ">

       <a href="#intro" class="scrollto"><img src="{% static 'images/logo.png' %}"  alt="" class="img-fluid "></a>
      </div>

      <nav class="main-nav float-right d-none d-lg-block ">
        <ul>
          <li
          {% if '/' == request.path %}
              class= "nav-item active"
          {% else %}
             class= "nav-item "
          {% endif %}
                   >
            <a href ="{%url 'index'%}">Home</a></li>
          <li>
          <a href="#about">About Us</a></li>
          <li
          {% if '/services/' == request.path %}
              class= "nav-item active"
          {% else %}
             class= "nav-item "
          {% endif %}

          >
          <a href="{%url 'services'%}">Services</a></li>
          <li><a href="#portfolio">Portfolio</a></li>

        </ul>
      </nav>

    </div>
  </header>

  <section id="intro" onload="init()">
    <div class="container">
      <div class="row">
        <div class="span">
          <!-- <h2><strong><span class="highlight primary">{{model.name}}</span></strong></h2>
          <p class="lead">
          <strong>{{model.summary}}</strong>

          </p>


          <p>{{model.content}} </p> -->
          <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
            <ol class="carousel-indicators">
              <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
              <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
              <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
            </ol>
            <div class="carousel-inner">
      <div class="carousel-item active">

        <img class="d-block w-100" src="{{model.slide1.url}}" alt="First slide">
      </div>
      <div class="carousel-item">
        <img class="d-block w-100" src="{{model.slide2.url}}" alt="Second slide">
      </div>
      <div class="carousel-item">
        <img class="d-block w-100" src="{{model.slide3.url}}" alt="Third slide">
      </div>
    </div>
    <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>


          </div>
        </div>
      </div>
          </div>
  <!-- </section>

  <section id="maincontent">
    <div class="container">
      <div class="row">
        <div class="span5">
          <div class="features">
            <div class="icon">
              <i class="icon-bg-light icon-circled fa fa-flag icon-box wow fadeInDown icon-5x"></i>
            </div>
            <div class="features_content">
              <h3>Challenge</h3>
              <p class="left">
                Dolorem adipiscing definiebas ut nec. Dolore consectetuer eu vim, elit molestie ei has, petentium imperdiet in pri mel virtute nam.
              </p>
                <a href="#" class="btn btn-info btn-sm" data-toggle="modal" data-target="#myModal"><i class="icon-angle-right"></i> Read more</a>
                <
                   <div class="modal fade" id="myModal" role="dialog">
                     <div class="modal-dialog">
                      <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title">Challenge</h4>
                        </div>
                        <div class="modal-body">
                            <p>Some text in the modal.</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-danger btn-sm" data-dismiss="modal">Close</button>
                        </div>
                     </div>
                  </div>
               </div>

            </div>
          </div>
        </div>
        <div class="span5">
          <div class="features">
            <div class="icon">
              <i class="icon-bg-light icon-circled fa fa-tasks icon-box wow fadeInDown icon-5x"></i>
            </div>
            <div class="features_content">
              <h3>Approach</h3>
              <p class="left">
                Dolorem adipiscing definiebas ut nec. Dolore consectetuer eu vim, elit molestie ei has, petentium imperdiet in pri mel virtute nam.
              </p>
                <a href="#" class="btn btn-info  btn-sm" data-toggle="modal" data-target="#myModalApproach"><i class="icon-angle-right"></i> Read more</a>

                <div class="modal fade" id="myModalApproach" role="dialog">
                  <div class="modal-dialog">
                   <div class="modal-content">
                     <div class="modal-header">
                         <h4 class="modal-title">Approach</h4>
                     </div>
                     <div class="modal-body">
                         <p>Some text in the modal.</p>
                     </div>
                     <div class="modal-footer">
                         <button type="button" class="btn btn-danger btn-sm " data-dismiss="modal">Close</button>
                     </div>
                  </div>
               </div>
            </div>
            </div>
          </div>
        </div>


      </div>



      <div class="row">
        <div class="span12">
          <div class="blank10"></div>
        </div>
      </div>


    </div>
    </section> -->
    <!-- {% if model.extras  %}
      {{ model.extras|safe }}
    {% endif %} -->
    <section id="servicesNew" >
        <div class="container">
          <header class="section-header">
            <h3>{{model.name}}</h3>
            <p>xLabs: The digital innovation hub within Virtusa.</p>
          </header>

        <div class="row">
          <div class="wow bounceInUp col-sm-6" data-wow-duration="1.4s">
            <div class="cta-box">
               <div class="cta form-group">
                 <div class="span2">
                  <label class="custom-upload">
                    <span class="fa fa-eye"></span>
                      Upload file here
                      <input type ="file" id = "upload" name="inputfile" class="form-control">
                  </label>
                  </div>

                  <div>
                  <div class=" span5" data-wow-duration="1.4s">

                      <div id="table-scroll">

                              <table class="fixed" id ="table_data">
                                <th>Name</th>
                                <th>Value</th>
                              {% for i in model.inputs_csv %}




                                         <tr>

                                            <td>
                                              {{i.0}}</td>
                                            <td>{{ i.1 }}</td>

                                         </tr>

                              {% endfor %}

                              </table>

                    </div>
              </div>
               </div>
                  <!-- <div class="span2">
                     <label class="custom-upload">
                     <span class="fa fa-database"></span>
                      Load Data here
                       <input type ="button" class="btn btn-color btn-rounded  btn-sm" id ="loadData" class="form-control">
                    </label>
                 </div> -->
               </div>
           </div>
         </div>
         <div class=" wow bounceInUp col-sm-6" data-wow-duration="1.4s">
           <!-- <h5>Result </h5>  <strong><h3 id='result' style='color:black;'></h3></strong> -->

              <h5>Result </h5>

            <strong>    <h3 id='result' style='color:black;'></h3></strong>


         </div>
          <!-- <div class=" wow bounceInUp col-sm-6" data-wow-duration="1.4s">

              <div id="table-scroll">

                      <table class="fixed" id ="table_data">
                      {% for i in model.inputs_csv %}
                         {% if forloop.counter == 1 %}
                            <th>{{ i.0 }}</th>
                            <th>{{ i.1 }}</th>

                               {% else %}
                                 <tr>

                                    <td>
                                      {{i.0}}</td>
                                    <td>{{ i.1 }}</td>

                                 </tr>
                       {% endif %}
                      {% endfor %}

                      </table>

            </div>

       </div> -->
     </div>

  <div class="row">
    <div class="span12">
      <div class="blank10"></div>
    </div>
  </div>


        <div class="col-xs-4"   style= " margin-bottom: 12px;">
            <input type ="submit" class="btn btn-success  btn-md" id ="Submit" class="form-control">
        </div
     </div>
</section>

<a href="#" class="back-to-top"><i class="fa fa-chevron-up"></i></a>
<!--==========================
  Footer
============================-->
<footer id="footer">


  <div class="container">
    <div class="copyright">
      &copy; Copyright <strong>VirtusaCorp</strong>. All Rights Reserved
    </div>
    <div class="credits">

      Designed by <a href="https://www.virtusa.com">xLabs</a>
    </div>
  </div>
</footer><!-- #footer -->
<!-- JavaScript Libraries -->

</body>
</html>
